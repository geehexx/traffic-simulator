---
globs: src/traffic_sim/render/*.py,src/traffic_sim/core/hud.py
description: Arcade library optimization and function usage guidelines
---

# Arcade Library Optimization

## Function Usage

### Rectangles
- **Center-based**: `arcade.draw_rectangle_filled(center_x, center_y, width, height, color)`
- **Boundary-based**: `arcade.draw_lrtb_rectangle_filled(left, right, top, bottom, color)`
- **❌ Avoid**: `arcade.draw_lbwh_rectangle_filled` (does not exist)

### Text (Performance Critical)
- **❌ Slow**: `arcade.draw_text()` in loops
- **✅ Fast**: `arcade.Text` objects for frequent updates
- **Pattern**: Pre-create in `__init__`, call `.draw()` in render

### Polygons
- **Filled**: `arcade.draw_polygon_filled(point_list, color)`
- **Outline**: `arcade.draw_polygon_outline(point_list, color, line_width)`

## Performance Patterns

1. **Text Objects**: Create once, reuse many times
2. **Rectangle Choice**: Center vs boundary based on coordinate system
3. **Batch Operations**: Group similar drawing operations
4. **Pre-creation**: Cache commonly used objects

## Validation
Use: `python scripts/validate_arcade_functions.py <files>`

## References
- [Arcade API](https://api.arcade.academy/en/latest/api/drawing_primitives.html)
- [Tutorials](https://arcade3.readthedocs.io/en/stable/index.html)